<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<title>Demo description</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./docinfo/copy-to-clipboard.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p><a href="Guide%3AMS‐DOS%3Ademoscene%3A1992.html">1992</a> demoscene entry.</p>
</div>
<div class="sect1">
<h2 id="_demo_description">Demo description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scroller, starfield, palette animation, objects, and credits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recommended_dosbox_x_configuration">Recommended DOSBox-X configuration</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>[dosbox]
memsize=1
machine=vgaonly
allow dma address decrement=true

[dos]
minimum mcb segment=400     # lower starting values may cause audible "glitches" when video mode changes

[cpu]
core=normal
cputype=386
cycles=8000

[sblaster]
sbtype=sb2
sbbase=220
dma=1
irq=7
io port aliasing=true</pre>
</div>
</div>
<div class="paragraph">
<p>The demo requires that your Sound Blaster is configured for IRQ 7, DMA
1. It will not work with Sound Blaster otherwise.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unusual_sound_blaster_requirements">Unusual Sound Blaster requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The demo does two strange things with hardware that later cards and
later emulation may not properly support.</p>
</div>
<div class="sect2">
<h3 id="_sound_blaster_io_port_aliasing">Sound Blaster I/O port aliasing</h3>
<div class="paragraph">
<p>Sound Blaster support is relatively normal except that it relies on port
0x22D to submit DSP commands. On actual Sound Blaster 2.0 hardware, this
I/O port is an alias of port 0x22C and works exactly the same. The demo
does not have any code to time out if the DSP does not respond. This is
why, if the demo is run on clone Sound Blaster compatible hardware, or
on SB16 cards, the demo will hang on startup if asked to do Sound
Blaster output.</p>
</div>
<div class="paragraph">
<p>To ensure the DOSBox-X works with this demo make sure you have this set
in your dosbox.conf:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[sblaster]
sbtype=sb2
io port aliasing=true</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dma_decrement_mode">DMA decrement mode</h3>
<div class="paragraph">
<p>For reasons unknown at this time, the demo programs the DMA controller
to run the Sound Blaster DMA in decrement mode. Instead of starting a
DMA block with the memory address at the bottom counting up, the demo
programs the address to the last byte of the DMA block, and instructs
the DMA controller to count down. It seems to render audio backwards to
match, so that you hear audio normally.</p>
</div>
<div class="paragraph">
<p>If the demo is run without DMA decrement emulation enabled, or on
mainline DOSBox, you will only hear loud static, or the demo will just
hang at startup.</p>
</div>
<div class="paragraph">
<p>Make sure your dosbox.conf is configured as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[dosbox]
allow dma address decrement=true</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_information">More information</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.pouet.net/prod.php?which=4182">More information (Pouet)</a></p>
</div>
</div>
</div>
</div>
<script src="./docinfo/copy-to-clipboard.js"></script>
</body>
</html>