<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<title>Installing Microsoft Windows 3.1x in DOSBox-X</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./rouge-github.css">
<link rel="stylesheet" href="./docinfo/copy-to-clipboard.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p>Back to the <a href="Guide%3AMicrosoft-Windows-in-DOSBox‐X">Microsoft Windows in DOSBox-X</a></p>
</div>
<div class="sect1">
<h2 id="_installing_microsoft_windows_3_1x_in_dosbox_x">Installing Microsoft Windows 3.1x in DOSBox-X</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.11_SPLASH.png" alt="Windows 3.11 splash screen">
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_installing_microsoft_windows_3_1x_in_dosbox_x">Installing Microsoft Windows 3.1x in DOSBox-X</a></li>
<li><a href="#_overview">Overview</a>
<ul class="sectlevel2">
<li><a href="#_editions_this_applies_to">Editions this applies to</a></li>
<li><a href="#_readme_1st">README.1ST</a></li>
<li><a href="#_useful_links">Useful links</a></li>
<li><a href="#_general_notes">General Notes</a></li>
</ul>
</li>
<li><a href="#_dosbox_x_config_file">DOSBox-X config file</a></li>
<li><a href="#_preparing_for_installation">Preparing for installation</a>
<ul class="sectlevel2">
<li><a href="#_example_of_extracting_files_from_disk_images">Example of extracting files from disk images</a></li>
</ul>
</li>
<li><a href="#_installing_in_a_mounted_folder">Installing in a mounted folder</a></li>
<li><a href="#_booting_from_a_dos_hdd_image">Booting from a DOS HDD image</a>
<ul class="sectlevel2">
<li><a href="#_host_folder_mounts">Host Folder mounts</a></li>
<li><a href="#_installing_windows_3_1x_into_a_dos_hdd_image">Installing Windows 3.1x into a DOS HDD image</a></li>
</ul>
</li>
<li><a href="#_starting_windows_3_1x_after_installation">Starting Windows 3.1x after installation</a></li>
<li><a href="#_steps_to_take_after_installation">Steps to take after installation</a></li>
<li><a href="#_video_driver">Video driver</a></li>
<li><a href="#_mouse_support">Mouse support</a></li>
<li><a href="#_dosbox_x_mouse_integration_driver">DOSBox-X mouse integration driver</a>
<ul class="sectlevel2">
<li><a href="#_vmware_mouse_driver_option_1">VMWare mouse driver - option #1</a></li>
<li><a href="#_vmware_mouse_driver_option_2">VMWare mouse driver - option #2</a></li>
</ul>
</li>
<li><a href="#_enabling_32_bit_file_and_disk_access">Enabling 32-bit File and Disk access</a></li>
<li><a href="#_enabling_networking">Enabling networking</a>
<ul class="sectlevel2">
<li><a href="#_enabling_ne2000_in_your_dosbox_x_config_file">Enabling NE2000 in your DOSBox-X config file</a></li>
<li><a href="#_setting_up_ne2000_networking_in_windows_for_workgroups">Setting up NE2000 networking in Windows for Workgroups</a></li>
</ul>
</li>
<li><a href="#_sound">Sound</a>
<ul class="sectlevel2">
<li><a href="#_enabling_external_midi">Enabling external MIDI</a></li>
</ul>
</li>
<li><a href="#_enabling_printing">Enabling printing</a>
<ul class="sectlevel2">
<li><a href="#_print_to_postscript">Print to PostScript</a></li>
<li><a href="#_epson_emulation">Epson emulation</a></li>
</ul>
</li>
<li><a href="#_installing_win32s">Installing Win32s</a></li>
<li><a href="#_starting_a_windows_game_from_dos">Starting a Windows game from DOS</a></li>
<li><a href="#_known_limitations">Known limitations</a></li>
<li><a href="#_outstanding_issues">Outstanding issues</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide will give a general description of installing Windows 3.1x in DOSBox-X, in addition to addressing some common issues.</p>
</div>
<div class="sect2">
<h3 id="_editions_this_applies_to">Editions this applies to</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Windows 3.1</strong> (released Apr 6, 1992)</p>
<div class="ulist">
<ul>
<li>
<p>Supports up to 256MB RAM.</p>
</li>
<li>
<p>Dropped support for real mode (8086/8088 CPUs).</p>
</li>
<li>
<p>Includes updated Multimedia Extensions.</p>
</li>
<li>
<p>Adds TrueType font support.</p>
</li>
<li>
<p>Adds optional 32-bit disk access (386 Enhanced Mode only).</p>
</li>
<li>
<p>Adds the Windows Registry.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Windows 3.11</strong> (released Nov 8, 1993)</p>
<div class="ulist">
<ul>
<li>
<p>Bug fix release.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Windows for Workgroups 3.1</strong> (released Oct, 1992)</p>
<div class="ulist">
<ul>
<li>
<p>Adds SMB file sharing (NBF or IPX protocols only).</p>
</li>
<li>
<p>Adds VSHARE.386.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Windows for Workgroups 3.11</strong> (released Nov 8, 1993)</p>
<div class="ulist">
<ul>
<li>
<p>Adds 32-bit file redirectors.</p>
</li>
<li>
<p>Drops support for standard mode (286 CPUs).</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Windows for Workgroups 3.11a</strong></p>
<div class="ulist">
<ul>
<li>
<p>Removed compression support from Remote Access software</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Windows 3.2</strong> (released Nov 22, 1993)</p>
<div class="ulist">
<ul>
<li>
<p>Chinese language release of Windows 3.1.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Edition</th>
<th class="tableblock halign-left valign-top">Min CPU</th>
<th class="tableblock halign-left valign-top">Min RAM</th>
<th class="tableblock halign-left valign-top">Max RAM</th>
<th class="tableblock halign-left valign-top">Min HDD space</th>
<th class="tableblock halign-left valign-top">Min DOS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">286</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">286</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1 WfW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">386</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.11 WfW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">386</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Windows 3.1x was available in both Retail and OEM editions.</p>
</div>
<div class="paragraph">
<p>OEM editions may include and default to different drivers in SETUP for things like video and sound.</p>
</div>
</div>
<div class="sect2">
<h3 id="_readme_1st">README.1ST</h3>
<div class="paragraph">
<p>There are already some guides to installing Windows 3.1x in DOSBox, and those guides will also work with DOSBox-X.
Some examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.vogons.org/viewtopic.php?t=9405">Windows 3.1x DOSBox Guide</a> on Vogons by user Dominus</p>
</li>
<li>
<p><a href="https://www.howtogeek.com/230359/how-to-install-windows-3.1-in-dosbox-set-up-drivers-and-play-16-bit-games/">How to Install Windows 3.1 in DOSBox, Set Up Drivers, and Play 16-bit Games</a> on How-To Geek</p>
</li>
<li>
<p><a href="http://www.sierrahelp.com/Utilities/Emulators/DOSBox/3x_install.html">Windows 3x on DOSBox guide</a> on sierrahelp.com</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This guide does not look to replicate those guides. Instead, this guide will have some install guidance and hints and tips not covered on those pages, or that are specific to DOSBox-X. It is not intended to be a comprehensive guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="_useful_links">Useful links</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/">VOGONS Vintage Driver Library</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Windows_3.1x">Wikipedia: Windows 3.1x</a></p>
</li>
<li>
<p><a href="https://microsoft.fandom.com/wiki/Windows_3.1">Fandom: Windows 3.1</a></p>
</li>
<li>
<p><a href="https://betawiki.net/wiki/Windows_3.1xp">BetaWiki: Windows 3.1x</a></p>
</li>
<li>
<p><a href="https://nerdlypleasures.blogspot.com/2016/11/windows-31-dawn-of-windows-gaming.html">Nerdly Pleasures: Windows 3.1 - The Dawn of Windows Gaming</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_general_notes">General Notes</h3>
<div class="ulist">
<ul>
<li>
<p>Some parts of the installation can take a considerable amount of time.
You may be able to speed this up considerably (depending on the host CPU) by using the DOSBox-X Turbo mode, which can be enabled from the drop-down menu bar by selecting "CPU" followed by "Turbo (Fast Forward)".
This turbo mode is not like the old Turbo button on retro PCs, but functions more like a fast-forward, and therefore should not be used when interacting with the guest OS.
The turbo mode is automatically disabled the moment a key is pressed, to prevent spurious keypresses to be registered causing undesirable effects.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dosbox_x_config_file">DOSBox-X config file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is recommended that you create a custom DOSBox-X config file for running Windows 3.1x</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[sdl]</span>
<span class="py">autolock</span><span class="p">=</span><span class="s">true</span>

<span class="nn">[dosbox]</span>
<span class="py">title</span><span class="p">=</span><span class="s">Windows 3.1x</span>
<span class="py">memsize</span><span class="p">=</span><span class="s">256</span>

<span class="nn">[dos]</span>
<span class="err">hard</span> <span class="err">drive</span> <span class="err">data</span> <span class="err">rate</span> <span class="py">limit</span><span class="p">=</span><span class="s">0</span>
<span class="err">floppy</span> <span class="err">drive</span> <span class="err">data</span> <span class="err">rate</span> <span class="py">limit</span><span class="p">=</span><span class="s">0</span>

<span class="nn">[cpu]</span>
<span class="py">cputype</span><span class="p">=</span><span class="s">pentium</span>
<span class="py">core</span><span class="p">=</span><span class="s">normal</span>

<span class="nn">[pci]</span>
<span class="py">voodoo</span><span class="p">=</span><span class="s">false</span>

<span class="nn">[ide, primary]</span>
<span class="py">int13fakeio</span><span class="p">=</span><span class="s">true</span>
<span class="py">int13fakev86io</span><span class="p">=</span><span class="s">false</span>

<span class="nn">[render]</span>
<span class="py">scaler</span><span class="p">=</span><span class="s">none</span>

<span class="nn">[autoexec]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy the above config and save it as <code>win31.conf</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preparing_for_installation">Preparing for installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Practically all Windows 3.1x versions were shipped on floppies, requiring anywhere between 5 and 15 disks, depending on media-type and Windows version.
And while it is possible to install Windows 3.1x from floppy images in DOSBox-X, the disk-swap process for this is rather tedious for substantial number of disks.
As such it is recommended to make a directory such as "INSTALL" and copy the contents of ALL the diskettes into this directory.
This way there is no need to swap disks during the installation process.</p>
</div>
<div class="sect2">
<h3 id="_example_of_extracting_files_from_disk_images">Example of extracting files from disk images</h3>
<div class="paragraph">
<p>There are several ways to extract the contents of disk images, such as 7zip on Windows or "Disk Image Mounter" on Linux.
In this example, DOSBox-X itself is used to mount a disk image, copy its contents into a folder, unmount the disk image and do the next.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">MOUNT C /home/myuser/winroot
C:
MD INSTALL
IMGMOUNT A DISK01.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK02.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK03.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK04.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK05.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A -U</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Your new INSTALL directory now holds the contents of all 5 disks in this example.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_in_a_mounted_folder">Installing in a mounted folder</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This method is the easiest, but has a limitation in that it will not allow for 32-bit disk IO with Windows 3.1x. However, no software needs this, and it does not provide a real performance benefit in DOSBox-X.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a directory on your system that you&#8217;re going to use (mount) as your Windows 3.1x C: drive.
Valid examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For Windows hosts</p>
<div class="ulist">
<ul>
<li>
<p>C:\winroot</p>
</li>
<li>
<p>C:\users\myuser\win31</p>
</li>
</ul>
</div>
</li>
<li>
<p>For Linux hosts</p>
<div class="ulist">
<ul>
<li>
<p>/home/myuser/winroot</p>
</li>
<li>
<p>/home/myuser/windows/win311</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For users running Windows natively on their computer, do <strong>NOT</strong> mount the root of your C: drive as the DOSBox C: drive! (e.g., <code>MOUNT C: C:\</code> should NOT be done), as it will cause confusion and potential conflicts between the host system C:\WINDOWS directory and that of Windows 3.1x.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now create a directory underneath that, which will hold your Windows 3.1x installation files.
e.g., <code>C:\users\myuser\win31\INSTALL</code> or <code>/home/myuser/winroot/INSTALL</code> and copy the installation files into it.</p>
</div>
<div class="paragraph">
<p>You are now ready to start DOSBox-X from the command-line, using the newly created <code>win31.conf</code>.
This assumes that the <code>dosbox-x</code> program is in your path and <code>win31.conf</code> is in your current directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">dosbox-x -conf win31.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You now need to mount your new folder as the C: drive in DOSBox-X and start the installation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">MOUNT C /home/myuser/winroot
C:
CD INSTALL
SETUP</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adjust the path for mounting the C: drive as needed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If your path has spaces in it, you need to enclose it in quotes. e.g., <code>MOUNT C "C:\Users\John Doe\winroot"</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Windows installation will now take place.</p>
</div>
<div class="paragraph">
<p>Once the installation process has finished, you will be asked if you want to start windows or exit to DOS.
Exit to DOS and type EXIT to close DOSBox-X.</p>
</div>
<div class="paragraph">
<p>Now edit your <code>win31.conf</code> config file and add the following lines into the [autoexec] section at the end of the file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">@ECHO OFF
MOUNT C /home/myuser/winroot
C:
IF EXIST C:<span class="se">\W</span>INDOWS<span class="se">\I</span>FSHLP.SYS GOTO WFW
IF EXIST C:<span class="se">\W</span>INDOWS<span class="se">\W</span>IN.COM GOTO WINDOWS
ECHO No Windows installation found
GOTO END

:WFW
<span class="nb">echo </span>Starting Windows <span class="k">for </span>Workgroups 3.1x
SET <span class="nv">PATH</span><span class="o">=</span>%PATH%<span class="p">;</span>C:<span class="se">\W</span>INDOWS<span class="p">;</span>
SET <span class="nv">TEMP</span><span class="o">=</span>C:<span class="se">\W</span>INDOWS<span class="se">\T</span>EMP
DEVICE C:<span class="se">\W</span>INDOWS<span class="se">\I</span>FSHLP.SYS
C:<span class="se">\W</span>INDOWS<span class="se">\N</span>ET.EXE START
C:<span class="se">\W</span>INDOWS<span class="se">\W</span>IN.COM
GOTO END

:WINDOWS
<span class="nb">echo </span>Starting Windows 3.1x
SET <span class="nv">PATH</span><span class="o">=</span>%PATH%<span class="p">;</span>C:<span class="se">\W</span>INDOWS<span class="p">;</span>
SET <span class="nv">TEMP</span><span class="o">=</span>C:<span class="se">\W</span>INDOWS<span class="se">\T</span>EMP
C:<span class="se">\W</span>INDOWS<span class="se">\W</span>IN.COM
GOTO END

:END
EXIT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adjust the <code>MOUNT</code> path above for mounting the C: drive as needed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_booting_from_a_dos_hdd_image">Booting from a DOS HDD image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This method brings with it a bit of added inconvenience.
For instance, you will need to do your own DOS memory management and load DOS drivers for CD-ROM access.
You can also not boot DOSBox-X from a mounted host directory (folder mount).</p>
</div>
<div class="sect2">
<h3 id="_host_folder_mounts">Host Folder mounts</h3>
<div class="paragraph">
<p>Starting with DOSBox-X 2022.08.0, there is optional support to dynamically convert a host folder mount to an emulated FAT harddisk for use when you need to boot a guest OS, such as MS-DOS.
This can be accomplished in one of two ways. Either when you issue the <code>boot</code> command, you add the option <code>-convertfat</code>. e.g. <code>boot c: -convertfat</code>.</p>
</div>
<div class="paragraph">
<p>Or by setting the following option in your DOSBox-X config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[sdl]</span>
<span class="py">convertdrivefat</span> <span class="p">=</span> <span class="s">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When you now boot from a real image file, it will attempt to convert <strong>ALL</strong> folder mounts at the time of booting to emulated FAT Harddisks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You cannot boot from such an emulated FAT harddisk. You will still need some other bootable image file to actually boot a guest OS.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This conversion is dynamic, effectively creating an emulated FAT harddisk out of a folder mount.
This converted FAT harddisk is not automatically stored permanently.
You can however, store it as a permanent image file that you can later mount with <code>IMGMOUNT</code>, using the "Drive" &gt; "drive letter" &gt; "Save to disk image" option from the menus.
Please see the "Creating harddisk images from folder mounts" section in the <a href="Guide%3AManaging-image-files-in-DOSBox‐X#Creating_harddisk_images_from_folder_mounts">Guide: Managing image files in DOSBox-X</a> for more information.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There is currently no support for creating emulated CD-ROM or Floppy drives out of folder mounts with this method. Any CD-ROM or Floppy folder mounts will also be converted to harddisk folder mounts, and may not actually work for the intended purpose.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One thing to note, is that there is no way to specify the FAT type to use for the conversion.
The FAT type will be automatically selected based on the aggregate size of files in the folder, plus 250MiB (this can be adjusted with the <code>convert fat free space</code> option in the DOSBox-X config file).
If the total space of files + 250MiB does not exceed 2GiB, it will convert it into a FAT16 disk. Otherwise, it will become a FAT32, which in turn will require a guest OS with FAT32 support.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can also make the emulated FAT drive read-only by using the <code>-convertfatro</code> option with the <code>boot</code> command. Or by setting <code>convert fat free space=0</code> option in the DOSBox-X config file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_windows_3_1x_into_a_dos_hdd_image">Installing Windows 3.1x into a DOS HDD image</h3>
<div class="paragraph">
<p>The first step is to create a DOS HDD image, for which you can follow the <a href="Guide%3ADOS-Installation-in-DOSBox‐X">PC DOS and MS-DOS Installation Guide</a>.
You need at least DOS 3.1 for Windows 3.1x, and DOS 3.3 for Windows for Workgroups.
However, it is recommended to use a newer version such as DOS 6.x</p>
</div>
<div class="paragraph">
<p>Once you have a DOS HDD image, temporarily mount it in DOSBox-X to transfer your INSTALL folder into your DOS HDD image, together with any drivers and add-ons you might need (preferably already unzipped, such that you don&#8217;t need to do that in DOS or Windows 3.1x, as they lack support for that by default).</p>
</div>
<div class="paragraph">
<p>Something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT C hdd.img
MOUNT D .
XCOPY D:\INSTALL C:\INSTALL /I /S
XCOPY D:\DRIVERS C:\DRIVERS /I /S
XCOPY D:\ADDONS C:\ADDONS /I /S
EXIT</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adjust paths in the above example as needed.</p>
</div>
<div class="paragraph">
<p>Now edit your <code>win31.conf</code> config file and in the <code>[autoexec]</code> section at the end, add the following lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT C hdd.img -reservecyl 1
BOOT C:</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now start DOSBox-X with your <code>win31.conf</code> config file from the command-line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">dosbox-x -conf win31.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It should boot to the C: prompt, and you can start the installation process.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">CD INSTALL
SETUP</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After the installation is finished, you can install your drivers and add-ons.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_windows_3_1x_after_installation">Starting Windows 3.1x after installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the installation is finished, you can start Windows 3.1x from the command-prompt with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">dosbox-x -conf win31.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can optionally create a shortcut on your desktop to start Windows 3.1x directly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps_to_take_after_installation">Steps to take after installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once Windows 3.1x is installed, here is some additional software you may want to install or update:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Updated Video and Audio drivers</p>
</li>
<li>
<p><a href="https://winworldpc.com/product/win32s/130">Microsoft Win32s 1.30c</a></p>
</li>
<li>
<p><a href="https://winworldpc.com/product/video-for-windows/1x">Microsoft Video for Windows 1.1e</a></p>
</li>
<li>
<p><a href="https://archive.org/details/WING10">Microsoft WinG API 1.0</a></p>
</li>
<li>
<p><a href="https://winworldpc.com/product/quicktime/2x">Apple QuickTime 2.1.2</a></p>
</li>
<li>
<p><a href="https://winworldpc.com/product/acrobat-reader/3x">Adobe Acrobat Reader 3.01</a></p>
</li>
<li>
<p><a href="https://winworldpc.com/product/adobe-type-manager/3x">Adobe Type Manager 3.02</a></p>
</li>
<li>
<p><a href="https://archive.org/details/adobeps312">Adobe PostScript driver 3.1.2</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_video_driver">Video driver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="Guide%3AVideo-card-support-in-DOSBox‐X">Video card support in DOSBox‐X</a> for more information about the various video cards, and available options.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The generic "Super VGA" driver included with Windows 3.1x only works under DOSBox-X with <code>machine=svga_et4000</code>.
Regardless, It is recommended to use the default VGA video driver during Windows 3.1x installation, and install a 3rd party SVGA driver afterwards.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you intend to use Video for Windows (VFW), first install VFW and then the updated S3 video driver. Alternatively, reinstall the S3 video driver after installing VFW. Failing to do so may result in VFW playback giving a green window.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For installing a 3rd party display driver, you should follow the instructions (e.g. README) included with the driver.
If there are no instructions included, exit Windows 3.1x back to the DOSBox-X prompt, then go into the WINDOWS subdirectory, and run <code>SETUP</code>. e.g.,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">cd \WINDOWS
SETUP</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Select the "Display" option, followed by the "Other" option at the bottom of the list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.11_SETUP_Display.png" alt="Windows 3.11 splash screen">
</div>
</div>
<div class="paragraph">
<p>Now provide the path where the unpacked driver can be found, and continue and the driver should install.</p>
</div>
<div class="paragraph">
<p>Here are the recommended drivers, depending on the video adapter you are emulating.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
For Windows 3.1x the recommended display adapter is the default S3 Trio64.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>S3 Graphics</strong></p>
<div class="ulist">
<ul>
<li>
<p>S3 86c928 using <code>machine=svga_s386c928</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/S3/S3WIN230.ZIP">Windows 3.1x - S3 928 drivers version 2.3B11, April, 25 1994</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 Vision864 using <code>machine=svga_s3vision864</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/S3/864141B5.ZIP">Windows 3.1x - S3 864 drivers version 1.41B5, March 2, 1995</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 Vision868 using <code>machine=svga_s3vision868</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/S3/868141B5.ZIP">Windows 3.1x - S3 868 drivers version 1.41B5, March 2, 1995</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 Vision964 using <code>machine=svga_s3vision964</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/S3/964141B5.ZIP">Windows 3.1x - S3 964 drivers version 1.41B5, March 2, 1995</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 Vision968 using <code>machine=svga_s3vision968</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/S3/968141B5.ZIP">Windows 3.1x - S3 868 drivers version 1.41B5, March 2, 1995</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 Trio32 using <code>machine=svga_s3trio32</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=275&amp;menustate=0">Windows 3.1x - S3 Trio drivers version 1.70.04, Sep 22, 1997</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 Trio64 (<strong>default</strong>) using <code>machine=svga_s3</code> or <code>machine=svga_s3trio64</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=275&amp;menustate=0">Windows 3.1x - S3 Trio drivers version 1.70.04, Sep 22, 1997</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 Trio64V+ using <code>machine=svga_s3trio64v+</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=275&amp;menustate=0">Windows 3.1x - S3 Trio drivers version 1.70.04, Sep 22, 1997</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 ViRGE using <code>machine=svga_s3virge</code> (experimental)</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=1702&amp;menustate=0">Windows 3.1x - S3 ViRGE drivers version 1.05.09, June 2, 1997</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>S3 ViRGE/VX using <code>machine=svga_s3virgevx</code> (experimental)</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=1702&amp;menustate=0">Windows 3.1x - S3 ViRGE drivers version 1.05.09, June 2, 1997</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Tseng Labs</strong></p>
<div class="ulist">
<ul>
<li>
<p>ET3000 using <code>machine=svga_et3000</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=245&amp;menustate=0">Windows 3.1x - ET3000 drivers, Dec 8 1994</a></p>
</li>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/TSENG/ET4-W31.ZIP">Windows 3.0/3.1x - Jan 15 1992</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>ET4000 using <code>machine=svga_et4000</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/TSENG/W31ET4.ZIP">Windows 3.1x - ET4000 drivers, Dec 8 1994</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Paradise Systems</strong></p>
<div class="ulist">
<ul>
<li>
<p>PVGA1A using <code>machine=svga_paradise</code></p>
<div class="ulist">
<ul>
<li>
<p>There does not appear to be a Windows 3.1x specific driver, use the Windows 3.0 driver instead.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The above video drivers are so-called "flat mode" drivers, which only work in Windows 3.1x Enhanced Mode (386 and above).
If for some reason you want to run Windows 3.1x standard mode (e.g. on a 286), use the Windows 3.0 drivers instead.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mouse_support">Mouse support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When running Windows in DOSBox-X the integration is not seamless.
You need to capture the mouse and again release it when you want the mouse to leave the DOSBox-X window.
This is because Windows uses its own driver instead of using the integrated mouse support that DOSBox-X provides.</p>
</div>
<div class="paragraph">
<p>There are three possible solutions to this.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dosbox_x_mouse_integration_driver">DOSBox-X mouse integration driver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is experimental support in DOSBox-X for seamless integration.
To get this working take the following steps:</p>
</div>
<div class="paragraph">
<p>Go to <a href="https://github.com/joncampbell123/doslib/releases">doslib releases</a> and download the latest binary release of doslib.
Unpack the archive, and you will find a Windows 3.1x mouse driver in the <code>windrv/dosboxpi/bin/win31</code> directory.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the <code>DBOXMPI.DRV</code> and <code>OEMSETUP.INF</code> files for your Windows version to a place where the Windows SETUP.EXE program will be able to find it</p>
</li>
<li>
<p>When you run SETUP.EXE, select to change the mouse and then select the "Other (requires disk provided by a hardware manufacturer)" option</p>
</li>
<li>
<p>Enter the path where you saved the <code>DBOXMPI.DRV</code> and <code>OEMSETUP.INF</code> files</p>
</li>
<li>
<p>Select the "DOSBox-X Mouse Pointer Integration" option</p>
</li>
<li>
<p>If SETUP asks for the "DOSBox-X Guest Additions" disk, give it the same path as before.</p>
</li>
<li>
<p>Continue the setup as normal</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, set the following options in your DOSBox-X config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[sdl]</span>
<span class="err">mouse</span> <span class="py">emulation</span><span class="p">=</span><span class="s">integration</span>

<span class="nn">[cpu]</span>
<span class="err">integration</span> <span class="py">device</span><span class="p">=</span><span class="s">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now when you run Windows 3.1x, you should have seamless mouse support.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
These old windows versions had no support for mice with scroll wheels. By default, DOSBox-X will simulate cursor up/down keypresses when you use the scroll wheel.
This can be controlled by the <code>mouse_wheel_key=</code> setting in the <code>[sdl]</code> section of your DOSBox-X config file.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_vmware_mouse_driver_option_1">VMWare mouse driver - option #1</h3>
<div class="paragraph">
<p>DOSBox-X also supports the VMware mouse protocol, and there is a 3rd party <a href="https://github.com/NattyNarwhal/vmwmouse">VMware mouse driver for Windows 3.x</a> written by NattyNarwhal.
As such you can install the VMware mouse driver for Windows 3.1x, and you will be able to move the mouse in and out of DOSBox-X seamlessly.</p>
</div>
<div class="paragraph">
<p>Simply run the DOS based SETUP.EXE program for Windows 3.1x and select "Mouse" followed by "Other". Then type the location where you saved the unpacked VMware mouse driver for Windows 3.1x.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vmware_mouse_driver_option_2">VMWare mouse driver - option #2</h3>
<div class="paragraph">
<p>Another option is the Windows 3.1x mouse driver <a href="https://git.javispedro.com/cgit/vbados.git/about/">VBMOUSE.DRV</a> by @javispedro, including support for the scroll wheel.</p>
</div>
<div class="paragraph">
<p>If you are running Windows 3.1x directly in the DOSBox-X integrated DOS environment, do not load the VBMOUSE.EXE driver. Only install the VBMOUSE.DRV in Windows 3.1x.</p>
</div>
<div class="paragraph">
<p>For scroll wheel support, you will also have to set the following setting in your DOSBox-X config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[sdl]
mouse_wheel_key=0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_32_bit_file_and_disk_access">Enabling 32-bit File and Disk access</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Introduced with Windows 3.1, <strong>32-Bit Disk Access</strong> allows Windows to bypass the 16-Bit BIOS.</p>
</li>
<li>
<p>Introduced with Windows 3.11, <strong>32-Bit File Access</strong> allows Windows to bypass the 16-Bit DOS FAT code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Enabling these features' means that Windows must leave 32-bit protected mode less often, and should therefore, at least in theory, be faster.
However, based on benchmarks, there is no advantage at this time to enabling these features in DOSBox-X, and it may reduce performance!</p>
</div>
<div class="paragraph">
<p><strong>32-Bit Disk Access</strong> (also called FastDisk) uses the WDCTRL driver built into WIN386.EXE that is included with Windows 3.1x, which <em>should</em> work in DOSBox-X if the following conditions are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must use a real DOS in DOSBox-X.</p>
</li>
<li>
<p>Your HDD image must have 1023 cylinders or fewer (max 504MB).</p>
<div class="ulist">
<ul>
<li>
<p>When creating you harddisk image in DOSBox-X you may want to use <code>IMGMAKE hdd.img -t hd_520</code>, which will give you exactly a 504MB HDD.</p>
</li>
</ul>
</div>
</li>
<li>
<p>You can only have one HDD.</p>
</li>
<li>
<p>You cannot have a CD-ROM as a slave on the same IDE controller as the HDD.</p>
</li>
<li>
<p>You must have set <code>int13fakeio=true</code> and <code>int13fakev86io=false</code> in your DOSBox-X config file.</p>
</li>
<li>
<p>You must mount your HDD image file with <code>-reservecyl 1</code>.</p>
</li>
<li>
<p>You must mount your HDD image file with device number 2, and not the drive letter (this is likely a bug in DOSBox-X).</p>
</li>
<li>
<p>You must edit <code>C:\WINDOWS\SYSTEM.INI</code> and in the <code>[386enh]</code> section add the following 2 lines (preferably between the <code>*pageswap</code> and <code>*biosxlat</code> drivers):</p>
<div class="ulist">
<ul>
<li>
<p><code>device=*int13</code></p>
</li>
<li>
<p><code>device=*wdctrl</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>In the same file, at the bottom of the <code>[386enh]</code> section add the line:</p>
<div class="ulist">
<ul>
<li>
<p><code>32BitDiskAccess=ON</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="https://os2museum.com/wp/how-to-please-wdctrl/">How to please WDCTRL</a> for more background information.</p>
</div>
<div class="paragraph">
<p><strong>32-Bit File Access</strong> has no such requirements and can be enabled seemingly on any system.</p>
</div>
<div class="paragraph">
<p>To enable these features, open the "Main" folder, followed by "Control Panel".
Now double-click on the "386" chip icon titled "Enhanced".
Then click on the "Virtual Memory&#8230;&#8203;" button.
Under Disk Status you can see what access methods Windows is currently using.
Now click on the "Change&gt;&gt;" button.
At the bottom there are options for "Use 32-Bit Disk Access" and "Use 32-Bit File Access".
If the 32-Bit Disk Access option is greyed out, it probably means your configuration is not compatible with the option.</p>
</div>
<div class="paragraph">
<p>There are 3rd party 32-Bit Disk Access drivers which <em>may</em> allow it to function on larger disks, but have not been tested in combination with DOSBox-X.
Most 3rd party drivers only work in combination with specific hardware. The Ontrack <code>ontrackw.386</code> driver does work in DOSBox-X but seems to have similar restrictions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_networking">Enabling networking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To enable networking, you first need to enable NE2000 network adapter emulation in your <code>win31.conf</code> config file and select an appropriate back-end for the NE2000 emulation.</p>
</div>
<div class="sect2">
<h3 id="_enabling_ne2000_in_your_dosbox_x_config_file">Enabling NE2000 in your DOSBox-X config file</h3>
<div class="paragraph">
<p>There are two different back-ends to the NE2000 adapter emulation.
The default back-end is <code>backend=pcap</code>.</p>
</div>
<div class="sect3">
<h4 id="_backendpcap">backend=pcap</h4>
<div class="paragraph">
<p>The PCAP back-end uses something called "Promiscuous mode".
This has the advantage that DOSBox-X can support various legacy network protocols, such as IPX and NetBIOS Frames (aka NetBEUI) in addition to TCP/IP.
This mode not only allows communication between DOSBox-X instances on the same network, but also with legacy PCs on the same network.</p>
</div>
<div class="paragraph">
<p>However, for this to work DOSBox-X needs to have very low-level access to your real network adapter.
In some cases, this is not possible, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Network Adapter or Driver not supporting Promiscuous mode (most wireless adapters fall into this category).</p>
</li>
<li>
<p>Your Ethernet switch not allowing multiple MAC addresses on a single port or doing any kind of MAC address whitelisting.</p>
</li>
<li>
<p>Sandboxed versions of DOSBox-X (e.g., Flatpak) not allowing the required low-level access.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable NE2000 emulation with the pcap back-end, add the following to your <code>win31.conf</code> config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[ne2000]</span>
<span class="py">ne2000</span><span class="p">=</span><span class="s">true</span>
<span class="py">nicirq</span><span class="p">=</span><span class="s">10</span>
<span class="py">backend</span><span class="p">=</span><span class="s">pcap</span>

<span class="nn">[ethernet, pcap]</span>
<span class="py">realnic</span><span class="p">=</span><span class="s">list</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>list</code> value for <code>realnic=</code> will need to be replaced by a value representing your actual network adapter.
See <a href="Guide%3ASetting-up-networking-in-DOSBox%E2%80%90X">Guide: Setting up networking in DOSBox-X</a> for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_backendslirp">backend=slirp</h4>
<div class="paragraph">
<p>Unlike the PCAP back-end, the SLIRP back-end does not require Promiscuous mode.
As such it will work with wireless adapters, and it will work in most sandboxed environments.</p>
</div>
<div class="paragraph">
<p>But obviously, it has its own limitations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is not supported in all platforms, such as Windows Visual Studio builds.</p>
</li>
<li>
<p>It only supports the TCP/IP protocol (other protocols must be TCP/IP encapsulated).</p>
</li>
<li>
<p>It is effectively behind a NAT (Network Address Translation) gateway, meaning that you can communicate outbound, but no systems on the LAN can instantiate a new connection to it. Which means that two DOSBox-X instances on the same LAN using <code>backend=slirp</code> cannot communicate with each other.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable NE2000 emulation with the slirp back-end, add the following to your <code>win31.conf</code> config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[ne2000]</span>
<span class="py">ne2000</span><span class="p">=</span><span class="s">true</span>
<span class="py">nicirq</span><span class="p">=</span><span class="s">10</span>
<span class="py">backend</span><span class="p">=</span><span class="s">slirp</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_ne2000_networking_in_windows_for_workgroups">Setting up NE2000 networking in Windows for Workgroups</h3>
<div class="paragraph">
<p>This only applies to <strong>Windows for Workgroups</strong> (WfW).</p>
</div>
<div class="paragraph">
<p>If you install WfW inside DOSBox-X with networking support, you need to run <code>DEVICE C:\WINDOWS\IFSHLP.SYS</code> and <code>C:\WINDOWS\NET START</code> before starting Windows if run from DOSBox-X&#8217;s internal DOS.</p>
</div>
<div class="paragraph">
<p>Windows for Workgroups by default only supports SMB networking over NBF (NetBIOS Frames aka NetBEUI) or IPX.
There is no support by default for the TCP/IP protocol.</p>
</div>
<div class="paragraph">
<p>You can however install <strong>Microsoft TCP/IP-32</strong>, which was sold separately, to add TCP/IP support to WfW.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There were many other 3rd party network stacks.
See <a href="http://sunsite.uakom.sk/sunworldonline/asm-08-1994/asm-08-tcpip.html">A happy hookup: TCP/IP joins Unix to PCs</a> and <a href="http://sunsite.uakom.sk/sunworldonline/swol-10-1995/swol-10-tcp.html">Comparing TCP/IP products for PCs</a> for an overview of TCP/IP stacks for both Windows 3.1 and WfW3.11.
These have not been tested, and may or may-not work.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sound">Sound</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting with Windows 3.1, multimedia support is standard.</p>
</div>
<div class="paragraph">
<p>DOSBox-X by default emulates a Creative Labs Sound Blaster 16.
<a href="http://www.sierrahelp.com/Utilities/Emulators/DOSBox/3x_InstallSB.html">Download and install</a> the SB16 driver package.
The installer needs to be run from DOS.</p>
</div>
<div class="paragraph">
<p>Pay close attention during installation to the IRQ.
The emulated SB16 in DOSBox-X defaults to IRQ7, while the SB16 driver package assumes IRQ5.
So, unless you changed the SB IRQ in your DOSBox-X config file, change the IRQ during installation to IRQ7.</p>
</div>
<div class="sect2">
<h3 id="_enabling_external_midi">Enabling external MIDI</h3>
<div class="paragraph">
<p>By default, the SB16 Windows 3.1x drivers will emulate MIDI playback using the OPL3 chip.
However, DOSBox-X has built-in support for General MIDI emulation (which is enabled by default), and which sounds much better.</p>
</div>
<div class="paragraph">
<p>To set it up, first ensure the SB16 drivers are installed.
Then in Windows 3.1x go to "Control Panel" and open "MIDI Mapper".</p>
</div>
<div class="paragraph">
<p>In Windows 3.1x go to "Control Panel", and open "MIDI Mapper.
If there is no "MIDI Mapper" icon in "Control Panel", the Sound Blaster drivers were not installed.
Select the "SB16 All MIDI" option from the drop-down menu and press the "Close" button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.1_MIDI.png" alt="Windows 3.1x MIDI">
</div>
</div>
<div class="paragraph">
<p>You should now be able to open the Windows 3.1x Media Player and playback something like <code>C:\WINDOWS\CANYON.MID</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_printing">Enabling printing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Also see the <a href="Guide%3ASetting-up-printing-in-DOSBox%E2%80%90X">Guide: Setting up printing in DOSBox-X</a></p>
</div>
<div class="sect2">
<h3 id="_print_to_postscript">Print to PostScript</h3>
<div class="paragraph">
<p>For the best print quality, you will want to print to a PostScript printer in Windows 3.1x.</p>
</div>
<div class="paragraph">
<p>First, set up your DOSBox-X config to print to a file as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[dosbox]</span>
<span class="py">captures</span><span class="p">=</span><span class="s">capture</span>

<span class="nn">[parallel]</span>
<span class="py">parallel1</span><span class="p">=</span><span class="s">file timeout=2000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can either use the PostScript driver bundled with Windows 3.1x, or alternatively install the newer Adobe PostScript 3.1.2 driver.</p>
</div>
<div class="paragraph">
<p>If using the bundled driver, select any PostScript printer such as the "QMS ColorScript 100", during printer setup connected to LPT1.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.11_PS_SETUP.png" alt="Windows 3.11 PostScript Printer setup">
</div>
</div>
<div class="paragraph">
<p>When you print, a .prt file in your <code>captures=</code> directory will be created, which despite the extension, is actually a PostScript file.</p>
</div>
<div class="paragraph">
<p>On Linux and macOS, PostScript files are natively supported and can be viewed and printed.
On a Windows host, it is necessary to install a separate PostScript viewer such as <a href="https://pages.cs.wisc.edu/~ghost/">GSview</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_epson_emulation">Epson emulation</h3>
<div class="paragraph">
<p>As an alternative, you can use the integrated Epson printer emulation, but the output quality will be significantly less compared to PostScript.</p>
</div>
<div class="paragraph">
<p>First, set up your DOSBox-X config to emulate an Epson printer as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[parallel]</span>
<span class="py">parallel1</span><span class="p">=</span><span class="s">printer</span>

<span class="nn">[printer]</span>
<span class="py">printer</span><span class="p">=</span><span class="s">true</span>
<span class="py">printoutput</span><span class="p">=</span><span class="s">ps</span>
<span class="py">multipage</span><span class="p">=</span><span class="s">true</span>
<span class="py">timeout</span><span class="p">=</span><span class="s">2000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next in Windows 3.1x, select any Epson dot-matrix printer during printer setup, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For Windows 3.1, the "Epson LQ-850" (or "LQ-1050" for wide formats), connected to LPT1</p>
</li>
<li>
<p>For Windows 3.11, the "Epson LQ-860" (or "LQ-1050" for wide formats), connected to LPT1</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Make sure that you do not configure the Epson printer driver for a graphics resolution other than 180x180, or the output will be corrupted.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.1_EPSON_SETUP.png" alt="Windows 3.1 Epson setup">
</div>
</div>
<div class="paragraph">
<p>When you print, a PostScript file with the .ps extension will be created in your current working directory.
The emulated Epson printer settings can be adjusted as documented on the above linked wiki printing guide.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_win32s">Installing Win32s</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Win32s is a 32-bit application runtime environment for Windows 3.1x.
Some games and applications require it.
Win32s version 1.30c is the latest version.</p>
</div>
<div class="paragraph">
<p>It installs and runs without problems in DOSBox-X.
But be aware, that unless your running Windows 3.1x under real DOS, then DOSBox-X&#8217;s integrated SHARE feature will be enabled by default which emulates most of the DOS SHARE.EXE functions.
Win32s requires that SHARE.EXE is loaded, so your options are either to use the SHARE functions as implemented by DOSBox-X or install Windows 3.1x in real DOS in DOSBox-X.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
While DOSBox-X&#8217;s integrated SHARE feature was improved compared to that of vanilla DOSBox, it may not fully implement all of DOS SHARE.EXE functions, and as such may not be 100% safe for some applications.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_a_windows_game_from_dos">Starting a Windows game from DOS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to silently start a Windows game, without seeing the Windows 3.1x splash screen or program manager, and when you exit the game that it exits Windows, here are the steps to take:</p>
</div>
<div class="paragraph">
<p>First install the game normally in Windows.</p>
</div>
<div class="paragraph">
<p>You can then start the game from DOS simply by appending the Windows game executable behind the WIN.COM executable as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">WIN \path\to\game.exe</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will prevent the Windows splash screen being shown and will directly start the game without first going to the Program Manager (progman).</p>
</div>
<div class="paragraph">
<p>The second step you may want to take, is that when you exit the game, you also exit Windows 3.1x. For this you need a 3rd party utility called "<a href="https://www.shdon.com/software/tools">RUNEXIT.EXE</a>", and place it in your PATH.
Now simply start the game as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">WIN RUNEXIT \path\to\game.exe</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Like before it will start the game without the Windows splash screen, but now when you Exit the game it will also Exit Windows.
This way you can launch Windows games from a DOS batch file, or from a DOSBox launcher such as <a href="https://dbgl.org/">DBGL</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_known_limitations">Known limitations</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>When booting a guest OS, such an MS-DOS with Windows 3.1x in DOSBox-X, so-called folder mounts are only partly supported.
Only harddisk folder mounts will be available to the guest OS, and this excludes the boot drive as DOSBox-X cannot boot from a folder mount.</p>
</li>
<li>
<p>If you intend at any point to use a diskette during your usage of Windows 3.1x, you must mount a diskette image <strong>before</strong> starting Windows 3.1x.
You can change the diskette, once you started Windows 3.1x from the DOSBox-X menus.
But if a diskette drive is not present when starting Windows 3.1x, and you attach it afterwards, it will not work properly, and you get strange errors.</p>
</li>
<li>
<p>If you intend at any point to use a CD during your usage of Windows 3.1x, you must mount a CD image <strong>before</strong> starting Windows 3.1x.
You can change the CD, once you started Windows 3.1x from the DOSBox-X menus.
But if a CD-ROM drive is not present when starting Windows 3.1x the drive is simply missing, and you cannot add it without quitting and restarting Windows 3.1x.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_outstanding_issues">Outstanding issues</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Using 32Bit Disk and File lowers performance.</p>
</li>
<li>
<p>32Bit Disk and File, requires mounting the HDD image using drive number.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<script src="./docinfo/copy-to-clipboard.js"></script>
</body>
</html>