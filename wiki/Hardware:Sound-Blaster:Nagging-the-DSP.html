<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<title>Explanation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./docinfo/copy-to-clipboard.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_explanation">Explanation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apparently the Sound Blaster hardware allows software to send a <code>Play
DMA block'' command (0x14) and then later send another </code>Play DMA
block'' command without letting the previous one finish. Without missing
a sample the DSP resets its counter and continues playback. If the DSP
is always interrupted in this manner, audio can play forever without
finishing the block. Nagging the DSP this way has no effect on the
stream coming from the DMA controller, so to the end user, there are no
glitches or dropouts during playback.</p>
</div>
<div class="paragraph">
<p>A possible benefit of this technique is that the DSP never fires an IRQ
because it never finishes the block. So a program using this technique
never has to worry about handling and autodetecting the Sound Blaster
IRQ.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compatibility">Compatibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All Creative hardware and most clones support this technique.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_problems">Problems</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_virtualizationemulation">Virtualization/emulation</h3>
<div class="paragraph">
<p>This technique may cause problems with virtualization or emulation that
assumes the program will let the previous one finish before sending
another. It may cause audio to skip forward or play fast. This is an
unusual use of the DSP that emulation is likely not designed to handle.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sound_blaster_16_and_dsp_4_xx_commands">Sound Blaster 16 and DSP 4.xx commands</h3>
<div class="paragraph">
<p>The technique can be used without problems if programming the card like
a Sound Blaster or Sound Blaster Pro. Sound Blaster 16 (DSP 4.xx)
commands however are less tolerant of nagging and using them this way
can cause the DSP to miss/skip bytes or stop playing entirely.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17%;">
<col style="width: 83%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Result (Sound Blaster 16 ViBRA)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit mono</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No problems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit stereo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depending on when the command is sent, the DSP may skip a
byte then resume stereo playback from the odd byte. When it happens the
user hears the left and right channels swap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16-bit mono</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the command is sent at the right time, the DSP will
stop playback entirely</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16-bit stereo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the command is sent at the right time, the DSP will
stop playback entirely</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_pro_audio_spectrum_sound_blaster_emulation">Pro Audio Spectrum Sound Blaster emulation</h3>
<div class="paragraph">
<p>On PAS+ and PAS16 hardware, nagging may cause subtle clicks and pops in
the audio output.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_real_world_usage_of_this_technique">Real-world usage of this technique</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Software%3Ademoscene%3ACrystal-Dream-by-Triton-(1992)">Crystal Dream by Triton (1992)</a></p>
</div>
</div>
</div>
</div>
<script src="./docinfo/copy-to-clipboard.js"></script>
</body>
</html>