

<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="DOSBox-X: Free, cross-platform and complete DOS, Windows 3.x and 9x emulation package">

    <link rel="stylesheet" type="text/css" media="screen" href="css/style.css">

    <script type="text/javascript" src="js/script.js"></script>
    <title>DOSBox-X - Complete DOS emulation package</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <table width="100%" style="border: hidden">
        <tr>
        <td width="25%" style="border: hidden; min-width: 300px; text-align: center">
          &nbsp;<p />&nbsp;<br/>
          <img id="dosbox-x-logo" src="images/dosbox-x-logo.svg" title="DOSBox-X" alt="DOSBox-X logo" style="width:90px" />
        </td><td>&nbsp;<p />
          <h1 id="project_title">DOSBox-X</h1>
          <h2 id="project_tagline">Cross-platform DOS emulation package<br />Complete, accurate emulation and more</h2>
        </td>
        </tr>
        </table>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer"; style="background-color: #fafacf">
        <div style="text-align: center">
            <h3 style="padding-top: 10px">DOSBox-X 0.83.20 Release Notes</h3>
            <h4 style="padding-bottom: 15px; font-weight: normal">Release Date: <span style="color: green">November 30, 2021</span></h4>
            Please report any issues in our <a href="https://github.com/joncampbell123/dosbox-x/issues">issue tracker</a>.</p>
            <p>Also, make sure to check out our <a href="wiki">Wiki guide</a>.</p>
            <h4>New in This Version</h4>

            <table width="100%" style="border: hidden">
            <tr>
            <td width="20%" style="border: hidden"></td>
            <td width="60%" style="border: hidden; text-align: left">
            <div style="font-size: 20px; font-weight: 800">1. Notable New Features</div>
<ul>

<li><div style="font-weight: 600">Support for Pentium II CPU type and other CPU improvements</div>The Pentium 2 CPU type is now supported in DOSBox-X! It is the fastest CPU type currently supported, and you can set "cputype=pentium_ii" (or check the option in the "CPU" menu) to enable it. Some Pentium 2 level CPU types (such as AMD K6 200 MHz and AMD K6-2 300 MHz) are now added to the "Emulate CPU speed" menu group. There are also improvements in other CPU types, from 8086 to Pentium MMX.</li>

<li><div style="font-weight: 600">Support for DCGA and Toshiba J-3100 system types</div>DCGA is the video mode used by the Olivetti M24, AT&T 6300 and Toshiba T3100, which is now supported. There is a DCGA command to enter this mode from any VGA mode. Also, the Japanese J-3100 system type is supported, and you can enable it by setting "dosv=jp" and "j3100=on" (or "dosv=jp" and "j3100=manual" and then use DCGA command to enter it manually). Enter the VGA command to go back to the standard mode.</li>

<li><div style="font-weight: 600">Support for changing serial and parallel port options at run-time</div>You can now view or change the settings of serial and parallel ports (COM1-COM9, LPT1-LPT9) while DOSBox-X is running via the new SERIAL and PARALLEL commands. Enter the command without a parameter to view the current port settings, or specify a port number to change its setting. Type "SERIAL /?" and "PARALLEL /?" and the [serial] and [parallel] sections of the config file for more information about using these commands. Commands like "config -set serial?=..." and "config -set parallel?=..." will also call these two commands automatically.</li>

<li><div style="font-weight: 600">Added new DOS commands: COMP, DISKCOPY, EDLIN, FC, FILES, PRINT, SHUTDOWN</div>Most of these commands are standard DOS commands in some DOS versions, which are now supported in DOSBox-X's internal DOS shell. For example, you can enter "PRINT filename" to send the specified file to the printing device. SHUTDOWN command can be used to restart or shut down DOS, and it makes use of the APM support supported by DOSBox-X.</li>

<li><div style="font-weight: 600">Much improved support for swapping disks/CDs (from either menu or command-line)</div>The functions for swapping disks/CDs are much improved in this version, including support for changing floppy images with drive number (0 or 1) only, improved support for changing CD images while a Windows 9x guest system is running, as well as a new IMGSWAP command to swap disk/CD images. For the IMGSWAP command, you can for example enter the command "IMGSWAP D" to swap D: drive to the next swap position, and "IMGSWAP A 3" to swap A: drive to the 3nd swap position.</li>

<li><div style="font-weight: 600">Much improved DBCS support for Chinese/Japanese/Korean languages</div>Support for Chinese/Japanese/Korean languages once again saw significant improvements, such as much improved auto-detection of box-drawing characters, support for ChinaSea (中國海字集) and Big5-2003 extension of the original Big5-1984 charset for Traditional Chinese TTF output (set "chinasea=true" in [ttf] section, or toggle it from menu), support for selecting files containing CJK characters in the file browse dialog boxes, and so on. Thanks for the feedbacks from Chinese- and Japanese-speaking users.</li>

<li><div style="font-weight: 600">Improved support for Direct3D pixel shaders</div>You can now load more Direct3D pixel shaders from the menu when using the Direct3D output. DOSBox-X will now display a confirmation message while trying to load a Direct3D pixel shader which may not be needed or may have undesired effect, and several Direct3D pixel shaders (such as GS2x.fx, CRT-geom-blend.fx and CRT-geom-curved.fx) are fixed to work in DOSBox-X's Direct3D output.</li>

<li><div style="font-weight: 600">Improved support for running guest systems</div>Support for running guest systems have been improved, including both DOS guest systems and a non-DOS guest OS like Windows NT. For example, code is added to further ensure DOS kernel resources are unmounted and deallocated before booting a guest OS, and the INT 13h AH=16h call is added to detect disk change. You can also boot into a DOS guest system when DOS/V is enabled.</li>

<li><div style="font-weight: 600">Support for unit testing based on Google Test framework</div>For developers, unit tests based on the Google Test framework (using gTest and gMock) are supported to ensure code stability. There is a command-line option "-tests" of the DOSBox-X executable to launch the unit tests. Please feel free to add more unit tests to the code to test more aspects of the emulator.</li>

</ul>

            <div style="font-size: 20px; font-weight: 800">2. Notable Usability Improvements</div>
<ul>

<li><div style="font-weight: 600">TrueType font selection page in Windows installer to select a default font for TTF output</div>There is now a TrueType font selection page in the Windows installer for new DOSBox-X installations, allowing users to select a TTF/TTC/OTF font for the TrueType font output when it is enabled. TTF fonts including the Sarasa Gothic, Consolas, Courier New, and Nouveau IBM fonts can be selected directly, or you can also use a custom TTF/TTC/OTF font for DOSBox-X's TrueType font output.</li>

<li><div style="font-weight: 600">Message boxes to display saved file names for screenshots and audio recording</div>For screenshot and MIDI/OPL recording, DOSBox-X will now display a message box showing the saved file name when the recording has been completed, in case the user wants to know where the recording has been saved. The full file paths will also be recorded in the DOSBox-X logging file.</li>

<li><div style="font-weight: 600">Confirmation message for incompatible code pages for the selected emulated system</div>DOSBox-X will now show a confirmation message if DOS/V or Japanese PC-98/AX machine type is selected, but a language file with an incompatible code page is specified. The user can choose to use the default messages (or load a different message file) in this case to ensure the text will be displayed correctly for the selected emulated system.
</li>

<li><div style="font-weight: 600">Allows to display the current mouse capture status with CAPMOUSE command</div>The CAPMOUSE command without a parameter now shows the current status of the mouse capture, so that you can check whether the mouse is currently captured/released with a command.</li>

<li><div style="font-weight: 600">Allows to automatically restart DOSBox-X to apply new settings</div>Improvements are made to the CONFIG -set command so that when an option cannot changed at run-time, DOSBox-X may ask whether to restart itself to apply the new setting. The "machine" option for changing the emulated machine type is such an example. Also, options provided in the command "config -set" are now case-insensitive as in DOS.</li>

<li><div style="font-weight: 600">Allows to disable the rounded window corners in Windows 11</div>DOSBox-X is now adding support for Windows 11, and its rounded window corners will be disabled by default in favor of sqaure window corners for the emulator. You can disable the square corner enforcement with the config option "forcesquarecorner" in [sdl] section of the DOSBox-X configuration.</li>

<li><div style="font-weight: 600">Allows to auto-mount individual drives silently on Windows</div>You can now let DOSBox-X automatically mount individual Windows drives as DOSBox-X drives silently, by setting "mountwarning = false" in [dos] section of the DOSBox-X configuration. Any warning messages will be silenced when you try to switch the DOS drive (e.g. D:) within DOSBox-X in such case.
</li>

</ul>

            <div style="font-size: 20px; font-weight: 800">3. Bugfixes and Other Improvements</div>
There are also many bugfixes and other improvements, such as fixing issues that had occurred in the previous release (such as display glitches in the game "Continuing adventures of Cyberbox" and a bug which may lead to crash when trying to print documents), as well as other improvements (such as improved PC-98 emulation and separate floppy/hard drive I/O delays) to make DOSBox-X work better. Please see the full changelogs below for more information.

<p />
            <div style="font-size: 20px; font-weight: 800">4. Full Changelog In This Version</div>
<ul>
<li>
    Implemented support for Pentium II cputype (with
    the setting "cputype=pentium_ii" in [cpu] section),
    and added Pentium II SYSENTER/SYSEXIT instructions
    to normal core and debugger disassembler. The two
    instructions are supported for Pentium II cputype.
    CPUID for Pentium II will now report stepping 3 and
    model 3 which is a minimum requirement for OSes to
    attempt to use SYSENTER/SYSEXIT. Silencing for
    RDMSR/WRMSR and SYSENTER/SYSEXIT debug messages is
    removed while CPU "debug spew" is silenced by
    default. MSRs related to Intel microcode are added
    because both Linux and Windows ME probe those MSRs
    if Pentium II emulation reports stepping 3 model 3.
    The microcode MSRs are silently ignored. Moreover,
    the MSR register 0x0000001B has been added to
    Pentium II emulation. DOSBox-X does not emulate a
    local APIC but Windows ME assumes that MSR is
    present and reads/writes it on startup if DOSBox-X
    reports itself as a Pentium II. (joncampbell123)
</li><li>
    Added support for DCGA and Toshiba J-3100 emulation
    modes by importing code from DOSVAXJ3 by nanshiki.
    The J-3100 emulation mode can be enabled with the
    option "dosv=jp" along with a non-off setting of
    "j3100" option in [dosv] section. For example, with
    "j3100=on" or "j3100=auto" (and "dosv=jp") J-3100
    system will be enabled and activated at start. With
    "j3100=manual" (and "dosv=jp") J-3100 system will
    be enabled and not activated at start, but there is
    now a DCGA command to enter DCGA (either English or
    J-3100 DCGA, depending on if J-3100 is enabled)
    mode from other video modes. (nanshiki & Wengier)
</li><li>
    Added support for unit tests based on Google Test
    framework (gTest/gMock) to ensure code stability.
    Unit tests can be started with command-line option
    "-tests" in the debug builds. Some unit tests are
    ported from DOSBox Staging. (Wengier)
</li><li>
    Added SERIAL and PARALLEL commands to view/change
    the current configuration of serial/parallel ports.
    Type "SERIAL /?" and "PARALLEL /?" for further info
    about the two commands. Commands like "config -set
    serial?=..." and "config -set parallel?=..." will
    also auto-call these commands. (sduensin & Wengier)
</li><li>
    Added IMGSWAP command to swap disks for drives.
    e.g. "IMGSWAP D" to swap C: drive to the next swap
    position, and "IMGSWAP A 3" to swap A: drive to
    the 3nd swap position. (Wengier)
</li><li>
    Added DOS commands including COMP, DISKCOPY, EDLIN,
    FC, FILES, PRINT, and SHUTDOWN (most from FreeDOS)
    to the built-in Z: drive. Updated or recompiled
    EDIT and EDLIN commands to support LFNs. (Wengier)
</li><li>
    The CAPMOUSE command without a parameter now shows
    whether the mouse is captured/released. (Wengier)
</li><li>
    The command "config -set" is now case-insensitive
    for property names. Also, if an option cannot be
    changed at run-time, DOSBox-X will ask whether to
    restart itself to apply the new setting. (Wengier)
</li><li>
    Do not read real-mode data areas from mouse event
    handling if running a protected mode guest OS like
    Windows NT, and disable INT 33h functions when DOS
    kernel is shut down to boot into a guest OS. Moving
    mouse while Windows NT is running should no longer
    cause page faults and crashes. (joncampbell123)
</li><li>
    The setting "mountwarning = false" will now silence
    more warning messages during mounting. (Wengier)
</li><li>
    The code page setting of "country" option will now
    be ignored for PC-98, JEGA and DOS/V modes. These
    modes will enforce the desired code page. (Wengier)
</li><li>
    Added support for loading the ASC16/ASCFONT.15/
    ASC24/ASCFONT.24? font files from the UCDOS/ETen
    Chinese DOS systems for the options "fontxsbcs",
    "fontxsbcs16" and "fontxdbcs24" in [dosv] section
    of the config file for DOS/V systems. (Wengier)
</li><li>
    Improved auto-detection of box-drawing characters
    when using DBCS code pages. (Wengier)
</li><li>
    Applied UTF-8 conversions to file browse dialog
    boxes for selecting files containing Unicode
    characters (e.g. CJK characters). (Wengier)
</li><li>
    For screenshot and MIDI/OPL recording, DOSBox-X
    will now display a message box showing the saved
    file name when the recording has been completed.
    The full paths will also be logged. (Wengier)
</li><li>
    Added confirmation message while trying to load a
    Direct3D pixel shader which may not be needed or
    may have undesired effect. (Wengier)
</li><li>
    Added warning message if DOS/V or Japanese PC-98/AX
    machine type is selected and a language file with
    an incompatible code page is specified. (Wengier)
</li><li>
    Added "AMD K6 166 MHz", "AMD K6 200 MHz" and "AMD
    K6-2 300 MHz" menu options within the menu group
    "Emulate CPU speed" (under "CPU"). (Wengier)
</li><li>
    Added a TrueType font selection page into Windows
    installer, which will show when TrueType font (TTF)
    output is selected for new installations. (Wengier)
</li><li>
    Added MMX instruction PSHUFW and added typecasts
    to some MMX instructions in case compilers cannot
    properly shift uint64_t by uint8_t otherwise. Most
    Pentium-level MMX instructions (such as MOVD, MOVQ,
    and EMMS) are added to the debugger disassembler
    and support for the disassembler to represent MMX
    registers. (joncampbell123)
</li><li>
    Added code to normal core to flush paging TLB
    whenever handing a non-recursive guest page fault.
    The guest OS will likely update the page tables
    to resolve the fault. The Linux kernel will
    constantly get "stuck" whenever you run a command
    without this change. (joncampbell123)
</li><li>
    Added code to make sure DOS kernel drives and drive
    letters have been unmounted and deallocated before
    booting a guest OS or shutting down DOSBox-X
    (joncampbell123).
</li><li>
    Added ability to change floppy images with drive
    number (0 or 1) only. (Wengier)
</li><li>
    Added INT 13h AH=16h, detect disk change. This can
    be controlled by config option "int 13 disk change
    detect" (in [dos] section) in case any older OS can
    not handle it. INT 13h AH=15h will report a floppy
    drive with change line support if enabled. MS-DOS
    seems to work just fine with it. (joncampbell123)
</li><li>
    Added menu item "Enable extended Chinese character
    set" in "Video" => "TTF options" to toggle setting
    for the Simplified Chinese (GBK extension) and
    Traditional Chinese (ChinaSea extension). (Wengier)
</li><li>
    Added config option "chinasea" (in [ttf] section)
    which when set to "true" allows ChinaSea (中國海字集)
    and Big5-2003 extension of the original Big5-1984
    charset for Traditional Chinese TTF output. This
    requires the use of a TTF/OTF font containing such
    extended characters to correctly render them; the
    included SarasaGothicFixed TTF font is updated to
    support such characters.Certain Traditional Chinese
    DOS software like the Hyper Editor 5.03 (漢書5) makes
    use of ChinaSea characters. Also moved "gbk" config
    option from [dosv] to [ttf] section. (Wengier)
</li><li>
    Added config option "forcesquarecorner" (in [sdl]
    section) which when set to "true" will force to
    disable rounded corners on Windows 11. (Wengier)
</li><li>
    Added code to INT 18h emulation (IBM PC mode) to
    jump to ROM BASIC if the user provided an IBM
    ROM BASIC image to load. (joncampbell123)
</li><li>
    Added config option "ibm rom basic" in [dosbox]
    section which allows users to load a ROM image
    containing IBM PC ROM BASIC, for disk images
    and MS-DOS setups that need it. (joncampbell123)
</li><li>
    Added stub IBM ROM BASIC points in the BIOS area
    so that when BASIC(A).COM from MS-DOS 1.x and 2.x
    are run, a polite message is displayed instead of
    invalid code and crashes. (joncampbell123)
</li><li>
    8086 and 80186 CPU types no longer check segment
    limits. (joncampbell123 & Allofich)
</li><li>
    Put in undocumented behavior in opcode 0x8e for
    8086 and 80186. (Allofich)
</li><li>
    Made 8086 treat opcodes C0,C1,C8,C9,F1 as aliases
    of C2,C3,CA,CB,F0, and opcodes 0x60-0x6F as aliases
    of opcodes 0x70-0x7F. (Allofich)
</li><li>
    Adjusted multiple-prefix bug for 8086/286 to only
    apply when REP or REPZ is used. (Allofich)
</li><li>
    Fixed 0x0F opcode being valid on 80186 core when
    it should be invalid. (Allofich)
</li><li>
    Fixed CGA modes to always use a character height
    of 8, rather than reading it from address 485h.
    Fixes corrupt graphics in the PC Booter version
    of Apple Panic. (Allofich)
</li><li>
    Fixed underflow when INT 13 AH=2 called for
    sector 0. (Allofich)
</li><li>
    Fixed infinite loop when trying to run a 32-bit
    program with the 8086 CPU type. (Allofich)
</li><li>
    Fixed INT 13h emulation to no longer call the DOS
    kernel "DriveManager" if the DOS kernel has been
    shutdown. This fixes memory corruption issues in
    the guest OS system run by the BOOT command that
    can occur when the "swap disks" command is used in
    the emulator. (joncampbell123)
</li><li>
    Fixed DTA memory leak from FAT driver if FAT drive
    was mounted when booting into a guest OS. (joncampbell123)
</li><li>
    Fixed a crash on unmount that occurs if IMGMOUNT
    is used to mount multiple floppy disk images to
    a drive letter. (joncampbell123)
</li><li>
    Fixed possible crash with printing. (jamesbond3142)
</li><li>
    Fixed possible freeze when shutting down Windows 9x
    after changing a CD image from the menu. (Wengier)
</li><li>
    Fixed the default U.S. keyboard layout for the
    HX-DOS build. (Wengier)
</li><li>
    Fixed copying full-screen or multi-line text from a
    DBCS codepage in TTF output or PC98 mode. (Wengier)
</li><li>
    Fixed possible crash at start with getsysfont=true
    when a font may not be obtained on some Chinese
    Windows systems. (Wengier)
</li><li>
    Fixed TTF color issue with some DOS GUI programs by
    initializing the color scheme when with default
    COLORS= setting in EGA or VGA mode. (Wengier)
</li><li>
    Fixed some Direct3D pixel shaders not working (such
    as GS2x and CRT-geom-blend). (Wengier & depaljas)
</li><li>
    Fixed config option windowposition=x,y not working
    in Linux/macOS SDL1 builds. (Wengier)
</li><li>
    Fixed copying files from the virtual drive Z: not
    working when using the 4DOS shell. (Wengier)
</li><li>
    Fixed some issues in MORE command. (Wengier)
</li><li>
    Fixed "DIR>NUL" freeze/crash when only disk or CD
    images are mounted. (nanshiki)
</li><li>
    Fixed BIOS screen when resetting the machine with a
    non-TTF output and DOS/V mode enabled. (Wengier)
</li><li>
    Fixed the key `/~ not working when IME is enabled
    on a non-Japanese keyboard. (Wengier)
</li><li>
    Fixed display glitches in the game "Continuing
    adventures of Cyberbox". (Wengier)
</li><li>
    Fixed unusable joystick with config options like
    joy1response1 set to certain values. (Baderian)
</li><li>
    Make memory B0000-B7FFF unmapped for the CGA
    emulation. Fixes "Backgammon 5.0" detecting that
    an MDA is also present when using CGA. (Allofich)
</li><li>
    Make floppy I/O delay separately configurable from
    hard drive delay, and make it slower than before
    by default. It is adjustable via the "floppy drive
    data rate limit" config option. (Allofich)
</li><li>
    Always return bit 6 of port 61h as set for PC and as
    clear for PCjr and Tandy. Allows Zaxxon to load in
    PC mode. (Allofich)
</li><li>
    Video emulation for PC-98 mode (for 400-line modes)
    is now 16:10 instead of 4:3. 480-line PC-98 modes
    are still 4:3. (joncampbell123)
</li><li>
    PC-98 EGC emulation: Add generic ope_xx handler for
    the remaining block of undefined/undocumented EGC
    ROPs. This fixes "Atomic Punker" which uses EGC ROP
    0xBE for sprite rendering. (joncampbell123)
</li><li>
    Don't run mouse setup code if there is no emulated
    mouse. (Allofich)
</li><li>
    Integrated commits from mainline (Allofich)
<br />
    - Add proper opl3 handling of the waveform select
    to dbopl.
<br />
    - Correct disassembly of some FPU instructions.
</li>
</ul>
            </td><td></td></tr>
            <tr><td></td><td style="border: hidden"><table width="100%" style="text-align: center; font-weight: bold"><tr><td width="50%"><b>Previous release: 0.83.19 (<a href="release-0.83.19.html">release notes</a>)</b></td><td width="50%"><b>Previous release: 0.83.21 (<a href="release-0.83.21.html">release notes</a>)</b></td></tr></table></td><td style="border: hidden"></td></tr>
            <tr><td style="border: hidden"></td><td style="border: hidden"><center>Return to <a href="index.html">main page</a></center></td><td style="border: hidden"></td></tr>
            </table>            
        </div>
    </div>

    <!-- FOOTER  -->
    <iframe src="footer.html" onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>

  </body>
</html>
